jQuery(document).ready(function(c){var g=c(document).find(".ywdpd-sections-group"),e=g.find(".ywdpd-section"),f=e.find(".section-head"),u=f.find(".ywdpd-remove"),v=f.find(".ywdpd-active"),w=e.find(".yith-ywdpd-eventype-select"),h="undefined"!==typeof yith_ywdpd_admin?yith_ywdpd_admin.block_loader:!1,k="undefined"!==typeof yith_ywdpd_admin?yith_ywdpd_admin.error_msg:!1,x="undefined"!==typeof yith_ywdpd_admin?yith_ywdpd_admin.del_msg:!1,l=c("#yith-ywdpd-add-section"),m=function(b){b.on("click",function(){var a=
c(this);a.parents(".ywdpd-section").toggleClass("open");a.next(".section-body").slideToggle()})},n=function(b){b.on("click",function(a){a.stopPropagation();a=c(this);var d=a.data("section"),b=a.parents(".ywdpd-section");1==window.confirm(x)&&(h&&b.block({message:null,overlayCSS:{background:"#fff url("+h+") no-repeat center",opacity:.5,cursor:"none"}}),c.post(yith_ywdpd_admin.ajaxurl,{action:"yith_dynamic_pricing_section_remove",section:d},function(a){b.remove()}))})},p=function(b){b.on("click",function(a){a.stopPropagation();
a=c(this);a.data("section");var b=a.parents(".section-head").find(".active-hidden-field");a.hasClass("activated")?(a.removeClass("activated"),b.val("no")):(a.addClass("activated"),b.val("yes"))})},r=function(b){b.each(function(){var a=c(this),b=a.find("option:selected");q(a,b.val());a.on("change",function(){b=a.find("option:selected");q(a,b.val())})})},q=function(b,a){var c=b.parents(".ywdpd-section").find("tr.deps-apply_to");"categories"==a?c.show():c.hide()},t=function(b){b.ajaxChosen({method:"GET",
url:yith_ywdpd_admin.ajaxurl,dataType:"json",afterTypeDelay:100,data:{action:"ywdpd_category_search",security:yith_ywdpd_admin.search_categories_nonce}},function(a){var b={};c.each(a,function(a,c){b[a]=c});return b})};c("#yith-ywdpd-add-section-button").on("click",function(b){b.preventDefault();b=c(this);var a=b.data("section_id"),d=b.data("section_name"),e=l.val();""==e?k&&b.siblings(".ywdpd-error-input-section").html(k):c.post(yith_ywdpd_admin.ajaxurl,{action:"yith_dynamic_pricing_section",section:e,
id:a,name:d},function(a){l.val("");c(".ywdpd-error-input-section").remove();g.append(a);a=g.find(".ywdpd-section").last();var b=c(a).find(".section-head"),d=a.find(".yith-ywdpd-eventype-select"),e=a.find(".ywdpd-active"),f=a.find(".ywdpd-remove");a.find("select").chosen({width:"100%",disable_search:!0});m(b);r(d);n(f);p(e);a.find(".ajax_chosen_select_categories").each(function(){t(c(this))})})});jQuery(".ywdpd-sections-group").sortable({items:".ywdpd-section",cursor:"move",axis:"y",handle:".section-head",
scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",start:function(b,a){a.item.css("background-color","#f6f6f6")},stop:function(b,a){a.item.removeAttr("style")}});c(document).on("click",".upload_img_button",function(b){b.preventDefault();var a=c(this),d;d||(d=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1}),d.on("select",function(){var b=d.state().get("selection").first().toJSON();a.prev(".upload_img_url").val(b.url)}));d.open()});m(f);n(u);
p(v);r(w);e.find(".ajax_chosen_select_categories").each(function(){t(c(this))});e.find("select").chosen({width:"100%",disable_search:!1})});
